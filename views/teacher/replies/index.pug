extends ../../includes/layout

block content

    .row
        .col-md-12.col-lg-4#topics-column
            include ../menu
        .col-md-12.col-lg-8#tasks-column
            .card
                .card-header.text-center
                    strong Wybierz temat i zadanie do wy≈õwietlenia odpowiedzi

                table.table.table-striped.responsive.table-bordered.table-grouplist
                    thead
                        tr
                            th ID
                            th Temat
                    tbody#tablebody
                        each topic in data
                            tr(onclick='selectTopic('+topic.id+')', style='cursor: pointer;')
                                th(scope='row')=topic.id
                                td=topic.number + '. ' + topic.title



                    script.
                        var topics = !{JSON.stringify(data).replace(/<\//g, '<\\/')}
                        var saved = '';

                        function selectTopic(id){
                          var topic = topics.filter(topic => topic.id===id)[0];
                          if(topic) {
                            saved = document.getElementById('tablebody').innerHTML;
                            var ret = '<tr><th><i onclick="getBack()" style="cursor: pointer;" class="fa fa-arrow-left fa-lg" aria-hidden="true"></i></th><td>' + topic.number + '. ' + topic.title + '</td></tr><tr><td colspan="2"><table class="table table-bordered table-striped table-hover responsive"><tbody id="tablebody">'
                            for(taskn in topic.tasks){
                              var task = topic.tasks[taskn];
                              ret += '<tr style="cursor: pointer;" onclick="document.location=\'/teacher/replies/view/'+task.id+'\'"><td>'+task.id+'</td><td>'+task.number + '. ' + task.title +'</td></tr>'
                            }
                            ret += '</tbody></table></td></tr>'
                            document.getElementById('tablebody').innerHTML =ret;
                          }
                        }

                        function getBack(){
                          if(saved===''){
                            return;
                          }
                          document.getElementById('tablebody').innerHTML = saved;
                        }